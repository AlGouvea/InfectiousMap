<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" ></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InfectiousMap</title>
    <style>
            body{
                background-color: rgb(144,238,144);
                color: rgb(44, 142, 35);
            }
            .nav-item{
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
                text-rendering: optimizeLegibility;
            }
            #principal{
                clear: both;
                color: black;
                text-align: center;
                padding: 100px 0 0 0;
                font-size: 60px;
            }
            
            footer{
                background-color: rgb(44, 142, 35);
                color: aliceblue;
                padding: 10px 0 0 10px;
                text-align: center; 
            }
           
           
            #menu{
                float: right;
                background-color: rgb(44, 142, 35);
                color: aliceblue;
                padding: 0 10px 0 0;
            }
            
            button {
                background-color: #234725;
                border: none;
                color: white;
                padding: 15px 32px;
                text-align: center;
                text-decoration: none;
                display: inline-block;
                font-size: 16px;
                margin: 4px 2px;
                border-radius: 10px;
                cursor: pointer;
            }

            navbar-brand{
                font-weight: bold;
                font-size: 15pt;

            }
            
            .dropMenu{

                position: relative;
                top: 50px;
                right: 240px;
                

            }

            #btnLogin{
                position: relative;
                
                right: 30px;
            }
            #name{
                position: relative;
                
                right: 60px;
            }
            #categoria{
                position: relative;
                top: -5px;
                right: 60px;
                
            }
            #infos{
                position: relative;
                top: 10px;
                right: 1px;
                
            }
            #cards{
                position: relative;
                margin: auto;
                top: -250px;
                right: 0px;
                
            }
            #card1{
                position: relative;
                top: 0px;
                right: -350px;
                
            }
            #card2{
                position: relative;
                top: -410px;
                right: -700px;
                
            }
            img{
              padding: 15px;
            }
            #inputnameCadDoenca{
              border-radius: 10px;
            }
            #inputcidCadDoenca{
              border-radius: 10px;
            }
            
        </style>

        <script>
          
$(function () {
        $("#crmChk").click(function () {
            if ($(this).is(":checked")) {
                $("#crm").show();

            } else {
                $("#crm").hide();
            }
        });
    });

function handleInput(e) {
   var ss = e.target.selectionStart;
   var se = e.target.selectionEnd;
   e.target.value = e.target.value.toUpperCase();
   e.target.selectionStart = ss;
   e.target.selectionEnd = se;
}


function verifSucess(){
  var url_string = window.location.href;
var url = new URL(url_string);
var c = url.searchParams.get("return");
console.log(c);
if(c == "successCadUser"){
  $("#msgTitle").html("Registrar-se");
  document.getElementById("imgStatus").src = "images/check.png";
  $("#msgStatus").html("Usuario cadastrado com sucesso!");
  $("#buttonAviso").attr('onclick', "window.location.href='/'");
  $("#buttonAviso").html("Meu Menu");

  $('#aviso').modal('show');
  
}else if(c == "errorCadUser"){
  $("#msgTitle").html("Registrar-se");
  document.getElementById("imgStatus").src = "images/error.png";
  $("#msgStatus").html("OPS! Erro ao cadastrar usuário!");
  $("#buttonAviso").attr('onclick', "window.location.href='/'");
  $("#buttonAviso").html("Página Inicial");
  $('#aviso').modal('show');
}
else if(c == "successLogin"){
  $("#msgTitle").html("Login");
  document.getElementById("imgStatus").src = "images/check.png";
  $("#msgStatus").html("Usuario logado com sucesso!");
  $("#buttonAviso").attr('onclick', "window.location.href='/'");
  $("#buttonAviso").html("Meu Menu");

  $('#aviso').modal('show');
  
}else if(c == "errorLogin"){
  $("#msgTitle").html("Login");
  document.getElementById("imgStatus").src = "images/error.png";
  $("#msgStatus").html("OPS! Erro ao logar!");
  $("#buttonAviso").attr('onclick', "window.location.href='/'");
  $("#buttonAviso").html("Página Inicial");
  $('#aviso').modal('show');
}else if(c == "errorUserExist"){
  $("#msgTitle").html("Login");
  document.getElementById("imgStatus").src = "images/error.png";
  $("#msgStatus").html("OPS! Usuário Já Cadastrado!");
  $("#buttonAviso").attr('onclick', "window.location.href='/'");
  $("#buttonAviso").html("Página Inicial");
  $('#aviso').modal('show');
}
else if(c == "successCadDoenca"){
  console.log("entrou");
  $("#msgTitle").html("Cadastro de Doença");
  document.getElementById("imgStatus").src = "images/check.png";
  $("#msgStatus").html("Doença Cadastrada com Sucesso!");
  $("#buttonAviso").attr('onclick', "window.location.href='/menu'");
  $("#buttonAviso").html("Menu");
  $('#aviso').modal('show');
}
else if(c == "errorCadDoenca"){
  $("#msgTitle").html("Cadastro de Doença");
  document.getElementById("imgStatus").src = "images/error.png";
  $("#msgStatus").html("Erro ao cadastrar doença!");
  $("#buttonAviso").attr('onclick', "window.location.href='/menu'");
  $("#buttonAviso").html("Menu");
  $('#aviso').modal('show');
}
else if(c == "errorCadDoencaExist"){
  $("#msgTitle").html("Cadastro de Doença");
  document.getElementById("imgStatus").src = "images/error.png";
  $("#msgStatus").html("Erro ao cadastrar doença! Esse  CID já existe!");
  $("#buttonAviso").attr('onclick', "window.location.href='/menu'");
  $("#buttonAviso").html("Menu");
  $('#aviso').modal('show');
}
else if(c == "errorCadDoencaNotPermmited"){
  $("#msgTitle").html("Cadastro de Doença");
  document.getElementById("imgStatus").src = "images/error.png";
  $("#msgStatus").html("Erro ao cadastrar doença! É necessário ser MÉDICO para tal.");
  $("#buttonAviso").attr('onclick', "window.location.href='/menu'");
  $("#buttonAviso").html("Menu");
  $('#aviso').modal('show');
}
}

$(document).ready(function() {
            $.get('/session', function(res) {
                //$('span').html(res);
                $('#name').html("Olá, "+res.user);
                if(res.crm == 0) {$('#categoria').html("Usuário");}
                else {$('#categoria').html("Médico");}
            })
        });



        </script>
</head>
<body onload="verifSucess();">
    <header>


        <nav  class="navbar navbar-expand-lg navbar-light bg-light">


            <a class="navbar-brand" href="#">
                <img src="/images/logo.png" width="70" height="70" alt="" loading="lazy">
                InfectiousMap
              </a>


            
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
          
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                  <a class="nav-link" href="#">Início <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="/sobre">Sobre</a>
                </li>

              </ul>
              
            <div id="infos">
                <h5 class="display-4" id="name" style="font-size: 20pt;text-align: center;"></h5>
           
              <h5 class="display-4" id="categoria" style="font-size: 12pt;text-align: center;"></h5>
            </div>
              
              <h5 class="display-4" id="name" style="font-size: 20pt;text-align: center;"></h5>
            </br>
              <h5 class="display-4" id="categoria" style="font-size: 12pt;text-align: center;"></h5>
               <img style="width:80px;height:80px;cursor:pointer;" src="/images/userIcon.png" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="rounded-circle" id="btnLogin"/>
               
               
               <div class="dropMenu">
                    <div class="dropdown-menu" id="dropMenu">
                        
                     <center><button class="btn btn-danger" onclick="location.href='/logout'">Sair</button></center> 
                    
                    <div class="dropdown-divider"></div>
                    <a style="te" class="dropdown-item">        Agradecemos a visita!</a>
                    
                
                  </div>
                
                
                </div>



                

                





















            </div>
          </nav>

          <div id="principal">
            <div aria-live="polite" aria-atomic="true" style="position:relative; min-height:200px;">
                <div class="toast" style="position: absolute; top: -70px; right: 10px;" id="toast" data-delay="10000">
                  <div class="toast-header">
                    <strong class="mr-auto">Nova mensagem do Lucas:</strong>
                    <small>Agora</small>
                    <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="toast-body">
                    Oi, seja Bem Vindo(a)!
                  </br>
                    Faca seu login ou cadastre-se!
                  </div>
                </div>
              </div>
        </div>
       
        
    </header>


<!-- Modal REGISTRO -->
<div class="modal fade" id="registro" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">Registrar-se</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form name="registro" method="POST" action="/cadastrar" id="registroForm">
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="inputEmail4">Usuário</label>
              <input type="user" class="form-control" id="inputUser" name="inputUser">
            </div>
            <div class="form-group col-md-6">
              <label for="inputPassword4" >Senha</label>
              <input type="password" class="form-control" id="inputPassword"name="inputPassword">
            </div>
          
          
            <label for="inputRa">Região Administrativa</label>
            <select id="inputRa" name="inputRa" class="form-control">
              <option value="1">Plano Piloto</option>
        <option value="2">Gama</option>
        <option value="3">Taguatinga</option>
        <option value="4">Brazlândia</option>
        <option value="5">Sobradinho</option>
        <option value="6">Planaltina</option>
        <option value="7">Paranoá</option>
        <option value="8">Núcle Bandeirante</option>
        <option value="9">Ceilândia</option>
        <option value="10">Guará</option>
        <option value="11">Cruzeiro</option>
        <option value="12">Samambaia</option>
        <option value="13">Santa Maria</option>
        <option value="14">São Sebastião</option>
        <option value="15">Recanto das Emas</option>
        <option value="16">Lago Sul</option>
        <option value="17">Riacho Fundo</option>
        <option value="18">Lago Norte</option>
        <option value="19">Candangolândia</option>
        <option value="20">Águas Claras</option>
        <option value="21">Riacho Fundo 2</option>
        <option value="22">Sudoeste/Octogonal</option>
        <option value="23">Varjão</option>
        <option value="24">Park Way</option>
        <option value="25">Estrutural/Scia</option>
        <option value="26">Sobradinho 2</option>
        <option value="27">Jardim Botânico</option>
        <option value="28">Itapoã</option>
        <option value="29">SIA</option>
        <option value="30">Vicente Pires</option>
        <option value="31">Fercal</option>
        <option value="32">Sol Nascente/Pôr do Sol</option>
        <option value="33">Arniqueira</option>
            </select>
          </div>
         
          <div class="form-group">
            <label for="inputMedicoChk">É Médico?</label>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="crmChk" name="crmChk">
              <label class="form-check-label" for="gridCheck">
                SIM
              </label>
            </div>
            <div class="form-group col-md-5" id="crm" >
              <label for="inputCity">CRM</label>
              <input type="text" class="form-control" id="inputCrm" name="inputCrm">
            </div>
          </div>
         
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
        <button type="button" onclick="document.getElementById('registroForm').submit();" class="btn btn-primary">Cadastrar-se</button>
      </div>
    </div>
  </div>
</div>


<!-- Modal Aviso -->
<div class="modal fade" id="aviso" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="msgTitle"></h5>
        <button type="button" class="close" onclick="window.location.href='/'" >

          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        
        <center><img id="imgStatus" src="/images/check.png" style="width: 100px;height: 100px;"/>
        <h1 id="msgStatus" style="font-size: 20pt;"></h1>
        </center>

      </div>
      <div class="modal-footer">
        <button type="button" id="buttonAviso"  class="btn btn-primary"></button>
      </div>
    </div>
  </div>
</div>



<!-- Modal REGISTRO CASOS -->
<div class="modal fade" id="cadastroCasos" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="staticBackdropLabel">Cadastro de Casos</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
    <br>

<form>
<div>
    <h4>Nome da Doença: <input id="text"></h4>
    <br>
    <h3>Data de Cadastro: <input id="date" type="date"></h3>
    <br>
    <h3>Região Administrativa de Ocorrência: 
    <select id="inputRa" name="inputRa">
        <option value="1">Plano Piloto</option>
        <option value="2">Gama</option>
        <option value="3">Taguatinga</option>
        <option value="4">Brazlândia</option>
        <option value="5">Sobradinho</option>
        <option value="6">Planaltina</option>
        <option value="7">Paranoá</option>
        <option value="8">Núcle Bandeirante</option>
        <option value="9">Ceilândia</option>
        <option value="10">Guará</option>
        <option value="11">Cruzeiro</option>
        <option value="12">Samambaia</option>
        <option value="13">Santa Maria</option>
        <option value="14">São Sebastião</option>
        <option value="15">Recanto das Emas</option>
        <option value="16">Lago Sul</option>
        <option value="17">Riacho Fundo</option>
        <option value="18">Lago Norte</option>
        <option value="19">Candangolândia</option>
        <option value="20">Águas Claras</option>
        <option value="21">Riacho Fundo 2</option>
        <option value="22">Sudoeste/Octogonal</option>
        <option value="23">Varjão</option>
        <option value="24">Park Way</option>
        <option value="25">Estrutural/Scia</option>
        <option value="26">Sobradinho 2</option>
        <option value="27">Jardim Botânico</option>
        <option value="28">Itapoã</option>
        <option value="29">SIA</option>
        <option value="30">Vicente Pires</option>
        <option value="31">Fercal</option>
        <option value="32">Sol Nascente/Pôr do Sol</option>
        <option value="33">Arniqueira</option>
      </select></h3>
      <br>

</div>
</form>
        </div>
    
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
          <button type="button" onclick="document.getElementById('registroFor4m').submit();" class="btn btn-primary">Cadastrar Caso</button>
        </div>
      </div>
    </div>
  </div>

<!-- Modal REGISTRO Doenças -->
<div class="modal fade" id="cadastroDoencas" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="staticBackdropLabel">Cadastro de Doenças</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
    <br>

    <form id="registrarDoenca" action="/cadastrarDoenca" method="POST"> 
        <div>
          <div style="align-items:center;">
             <h3>Nome: <input type="text" id="inputnameCadDoenca"  name="inputnameCadDoenca" oninput="handleInput(event)"></h3>
            
            <h3>CID:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input id="inputcidCadDoenca" type="number" name="inputcidCadDoenca" size="20"></h3>
          </div>
            <br>
            <h3>Formas de Transmissão:</h3>
            <input type="checkbox" id="Ar" name="transmAr"/>
            <label for="Ar"><img src="/images/Contagio/ar.png" style="width:5vw; height:5vw;"/></label>
            <input type="checkbox" id="Mosquito" name="transmMosquito"/>
            <label for="Mosquito"><img src="/images/Contagio/Mosquito.png" style="width:5vw; height:5vw;"/></label>
            <input type="checkbox" id="Fluidos" name="transmFluidos" />
            <label for="Fluidos"><img src="/images/Contagio/Fluidos.png" style="width:5vw; height:5vw;"/></label>
            <br>
            <h3>Formas de Prevenção:</h3>
            <input type="checkbox" id="Vacina" name="prevVacina"/>
            <label for="Vacina"><img src="/images/Prevencao/Vacina.png" style="width:5vw; height:5vw;"/></label>
            <input type="checkbox" id="Mascara" name="prevMascara" />
            <label for="Mascara"><img src="/images/Prevencao/Mascara.png" style="width:5vw; height:5vw;"/></label>
            <br>
            <h3>Nível de Risco:</h3> <br>
            <input type="radio" name="Risco"  id="1" value="Baixo"> 
            <label for="1"> <h5>Baixo</h5> </label>
            <input type="radio" name="Risco" id="2" value="Medio">
             <label for="2"><h5>Médio</h5></label>
            <input type="radio" name="Risco" id="3" value="Alto">
             <label for="3"><h5>Alto</h5></label> 
            <br>
            <h3>Sintomas:</h3>
            <input type="checkbox" id="Tosse" name="sintTosse"/>
            <label for="Tosse"><img src="/images/Sintomas/tosse.png" style="width:5vw; height:5vw;"/></label>
            <input type="checkbox" id="Febre" name="sintTosse" />
            <label for="Febre"><img src="/images/Sintomas/febre.png" style="width:5vw; height:5vw;"/></label>
            <input type="checkbox" id="Corisa" name="sintCoriza" />
            <label for="Corisa"><img src="/images/Sintomas/corisa.png" style="width:5vw; height:5vw;"/></label>
            <input type="checkbox" id="Dor_de_cabeca" name="sintDorDeCabeca"/>
            <label for="Dor_de_cabeca"><img src="/images/Sintomas/dor-de-cabeca.png" style="width:5vw; height:5vw;"/></label>
            <input type="checkbox" id="Diarreia" name="sintDiarreia"/>
            <label for="Diarreia"><img src="/images/Sintomas/diarreia.png" style="width:5vw; height:5vw;"/></label>
            
        </div>
        </form>
        </div>
    
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
          <button type="button" onclick="document.getElementById('registrarDoenca').submit();" class="btn btn-primary">Cadastrar Doença</button>
        </div>
      </div>
    </div>
  </div>




<div id="cards">

    <div  id="card1" class="card" style="width: 18rem;">
        <center><img src="/images/caso.png" class="card-img-top" alt="..." style="width: 200px;height: 200px;"></center>
        <div class="card-body">
          <center><h5 class="card-title">Cadastrar Caso</h5></center>
          <center><p class="card-text">Aqui pode-se cadastrar um caso ocorrido com você, parentes e/ou amigos e conhecidos.</p></center>
        </br>
          <center><a  class="btn btn-primary" data-toggle="modal" data-target="#cadastroCasos">Cadastrar</a></center>
        
        </div>
      </div>

      <div id="card2" class="card" style="width: 18rem;">
        <center><img src="/images/virus.png" class="card-img-top" alt="..." style="width: 200px;height: 200px;"></center>
        <div class="card-body">
          <center><h5 class="card-title">Cadastrar Nova Doença</h5></center>
          <center><p class="card-text">Aqui os MÉDICOS poderão cadastrar novas doenças para mapeamento.</p></center>
        </br>
          <center><a href="#" class="btn btn-primary" data-toggle="modal" data-target="#cadastroDoencas">Cadastrar</a></center>
        
        </div>
      </div>


</div>




  


    <footer>
        <p>
            Produzido pela Equipe ESCA.
        </p>
    </footer>
</body>
</html>